<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Past Tense Pronunciation Games</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/games.css">
</head>
<body>
    <!-- Settings Panel -->
    <div id="settingsPanel" class="settings-panel">
        <div class="settings-content">
            <h2>âš™ï¸</h2>
            <h3 id="settingsTitle">éŠæˆ²è¨­ç½®</h3>
            
            <div class="setting-group">
                <label id="volumeLabel">éŸ³é‡</label>
                <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.5">
            </div>
            
            <div class="setting-group">
                <label id="bgmLabel">èƒŒæ™¯éŸ³æ¨‚</label>
                <button id="bgmToggle" class="toggle-btn">ON</button>
            </div>
            
            <div class="setting-group">
                <label id="sfxLabel">éŸ³æ•ˆ</label>
                <button id="sfxToggle" class="toggle-btn">ON</button>
            </div>
            
            <div class="setting-group">
                <label id="languageLabel">èªè¨€</label>
                <div class="language-buttons">
                    <button class="lang-button active" data-lang="zh">ä¸­æ–‡</button>
                    <button class="lang-button" data-lang="en">English</button>
                </div>
            </div>
            
            <div class="setting-group">
                <label id="screenSizeLabel">è¢å¹•å¤§å°</label>
                <div class="size-buttons">
                    <button class="size-button" data-size="small">å°</button>
                    <button class="size-button active" data-size="medium">ä¸­</button>
                    <button class="size-button" data-size="large">å¤§</button>
                </div>
            </div>
            
            <button id="closeSettings" class="close-settings">Ã—</button>
        </div>
    </div>

    <!-- Story/Intro Video Container -->
    <div id="storyContainer" class="story-container" style="display: none;">
        <div class="video-wrapper">
            <video id="introVideo" controls>
                <source src="assets/video/intro.mp4" type="video/mp4">
                æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒ video æ¨™ç±¤ã€‚
            </video>
            <div class="story-controls">
                <button id="skipIntro">Skip</button>
                <button id="continueStory">Continue</button>
            </div>
        </div>
    </div>

    <!-- Main Game Container -->
    <div id="gameContainer" class="container">
        <!-- Main Menu -->
        <div id="mainMenu" class="main-menu">
            <h1 id="gameTitle">Language Quest Adventure</h1>
            <div class="menu-options">
                <button id="startGame" class="menu-btn">Start Adventure</button>
                <button id="continueGame" class="menu-btn">Continue Adventure</button>
                <button id="collectionsBtn" class="menu-btn">Collections</button>
                <button id="quitGame" class="menu-btn">Quit Game</button>
            </div>
            <button id="settingsBtn" class="settings-btn">âš™ï¸</button>
        </div>

        <!-- Collections Menu -->
        <div id="collectionsMenu" class="collections-menu" style="display: none;">
            <h2 id="collectionsTitle">Adventure Collections</h2>
            <div class="collections-grid">
                <div class="collection-item" data-artifact="explorer">
                    <div class="artifact-icon">ğŸ‘</div>
                    <h3 id="explorerName">Explorer's Eye</h3>
                    <p id="explorerDesc">Obtained after completing word exploration</p>
                </div>
                <div class="collection-item" data-artifact="timeController">
                    <div class="artifact-icon">â°</div>
                    <h3 id="timeControllerName">Time Controller</h3>
                    <p id="timeControllerDesc">Obtained after completing time challenge</p>
                </div>
                <div class="collection-item" data-artifact="knowledgeGem">
                    <div class="artifact-icon">ğŸ’</div>
                    <h3 id="knowledgeGemName">Knowledge Gem</h3>
                    <p id="knowledgeGemDesc">Obtained after completing knowledge trial</p>
                </div>
            </div>
            <button id="backToLobby" class="back-btn">Back to Lobby</button>
        </div>

        <!-- Game Selection Menu -->
        <div id="gameMenu" class="game-menu" style="display: none;">
            <h1 id="gameMenuTitle">è‹±èªéå»å¼ç™¼éŸ³å­¸ç¿’éŠæˆ²</h1>
            
            <div class="language-selector">
                <button class="lang-btn active" data-lang="zh">ä¸­æ–‡</button>
                <button class="lang-btn" data-lang="en">English</button>
            </div>

            <div class="menu">
                <button class="menu-button" data-game="wordSearch">å–®è©æœç´¢</button>
                <button class="menu-button" data-game="fallingWords">è½å­—éŠæˆ²</button>
                <button class="menu-button" data-game="multipleChoice">é¸æ“‡é¡Œ</button>
                <button class="menu-button boss-button" data-game="bossFight">Bossæˆ°</button>
            </div>

            <!-- Sound Selection Buttons -->
            <div class="sound-selection">
                <div class="sound-buttons">
                    <button class="color-mode-button" data-sound="t">/t/</button>
                    <button class="color-mode-button" data-sound="d">/d/</button>
                    <button class="color-mode-button" data-sound="id">/id/</button>
                </div>
                <div class="selected-sound">Selected: <span id="selectedSound">none</span></div>
            </div>

            <!-- Game Stats -->
            <div class="game-stats">
                <div class="stat">Score: <span id="totalScore">0</span></div>
                <div class="stat">Stage: <span id="currentStage">1</span></div>
            </div>

            <button id="backToMainMenu" class="back-btn">Back to Lobby</button>
        </div>

        <!-- Game 1: Word Search -->
        <div id="wordSearch" class="game-container">
            <h2>å–®è©æœç´¢éŠæˆ²</h2>
            <div class="instructions">åœ¨ç¶²æ ¼ä¸­æ‰¾åˆ°éå»å¼å–®è©ï¼Œé¸æ“‡æ­£ç¢ºçš„ç™¼éŸ³é¡å‹</div>
            
            <!-- Cutscene for Game 1 -->
            <div class="cutscene-container" id="game1Cutscene">
                <div class="cutscene-content cliff-scene">
                    <img src="assets/images/cliff-background.jpg" alt="æ‡¸å´–å ´æ™¯" class="background-img">
                    <div class="character-sprite" id="playerSprite">
                        <img src="assets/images/player-sprite.png" alt="è§’è‰²">
                    </div>
                    <div class="stone-bridges" id="stoneBridges">
                        <!-- Bridge stones will be generated dynamically -->
                    </div>
                    <div class="cutscene-text">
                        <p>ä½ ä¾†åˆ°äº†ä¸€å€‹æ‡¸å´–é‚Šï¼Œéœ€è¦ç”¨æ­£ç¢ºçš„ç™¼éŸ³çŸ¥è­˜å»ºé€ çŸ³æ©‹æ‰èƒ½é€šé...</p>
                    </div>
                </div>
            </div>
            
            <div class="game-board" id="wordSearchBoard"></div>
            
            <div class="word-lists">
                <div class="word-list" data-sound="t">
                    <h3>/t/ éŸ³</h3>
                    <div class="word-items" id="tWords"></div>
                </div>
                <div class="word-list" data-sound="d">
                    <h3>/d/ éŸ³</h3>
                    <div class="word-items" id="dWords"></div>
                </div>
                <div class="word-list" data-sound="id">
                    <h3>/id/ éŸ³</h3>
                    <div class="word-items" id="idWords"></div>
                </div>
            </div>
            
            <div class="game-controls">
                <div class="selected-word">é»æ“Šå­—æ¯çµ„æˆå–®è©: <span id="selectedWord"></span></div>
                <button id="confirmWord" class="control-btn">ç¢ºèª</button>
                <button id="clearSelection" class="control-btn">æ¸…é™¤</button>
                <button id="pronounceWord" class="control-btn">ç™¼éŸ³</button>
            </div>
            
            <div class="feedback" id="feedback"></div>
        </div>

        <!-- Game 2: Falling Words -->
        <div id="fallingWords" class="game-container">
            <h2>è½å­—éŠæˆ²</h2>
            <div class="instructions">ä½¿ç”¨æ–¹å‘éµæ¥ä½æ­£ç¢ºç™¼éŸ³çš„å–®è©</div>
            
            <!-- Cutscene for Game 2 -->
            <div class="cutscene-container" id="game2Cutscene">
                <div class="cutscene-content stone-rain-scene">
                    <img src="assets/images/cave-background.jpg" alt="æ´ç©´å ´æ™¯" class="background-img">
                    <div class="character-sprite sword-wielder" id="swordPlayer">
                        <img src="assets/images/warrior-sprite.png" alt="åŠå£«">
                    </div>
                    <div class="falling-stones" id="fallingStones">
                        <!-- Animated falling IPA stones -->
                    </div>
                    <div class="cutscene-text">
                        <p>IPAéŸ³æ¨™çŸ³å¡Šå¾å¤©ç©ºæ‰è½ï¼ç”¨ä¸åŒé¡è‰²çš„åŠæ–¬é–‹å°æ‡‰çš„çŸ³å¡Šï¼</p>
                    </div>
                </div>
            </div>
            
            <canvas id="fallingWordsCanvas" width="800" height="600"></canvas>
            <div class="game-info">
                <div>åˆ†æ•¸: <span id="fallingScore">0</span></div>
                <div>ç”Ÿå‘½: <span id="fallingLives">3</span></div>
            </div>
        </div>

        <!-- Game 3: Multiple Choice -->
        <div id="multipleChoice" class="game-container">
            <h2>é¸æ“‡é¡ŒéŠæˆ²</h2>
            <div class="instructions">è½ç™¼éŸ³é¸æ“‡æ­£ç¢ºçš„é¡å‹</div>
            
            <!-- Cutscene for Game 3 -->
            <div class="cutscene-container" id="game3Cutscene">
                <div class="cutscene-content hypnosis-scene">
                    <img src="assets/images/wizard-lair.jpg" alt="å·«å¸«å·¢ç©´" class="background-img">
                    <div class="character-sprite hypnotized" id="hypnotizedPlayer">
                        <img src="assets/images/player-hypnotized.png" alt="è¢«å‚¬çœ çš„è§’è‰²">
                    </div>
                    <div class="evil-wizard" id="evilWizard">
                        <img src="assets/images/wizard-sprite.png" alt="é‚ªæƒ¡å·«å¸«">
                    </div>
                    <div class="hypnosis-effects" id="hypnosisEffects">
                        <!-- Swirling hypnosis effects -->
                    </div>
                    <div class="cutscene-text">
                        <p>ä½ è¢«é‚ªæƒ¡å·«å¸«å‚¬çœ äº†ï¼åªæœ‰é€£çºŒç­”å°5é¡Œæ‰èƒ½æ‰“æ•—å·«å¸«è„«å›°ï¼</p>
                    </div>
                </div>
            </div>
            
            <div class="question-area">
                <div class="word-display" id="questionWord">é»æ“Šé–‹å§‹</div>
                <button id="playPronunciation" class="pronunciation-btn">ğŸ”Š æ’­æ”¾ç™¼éŸ³</button>
            </div>
            
            <div class="choices">
                <button class="choice-button" data-sound="t">/t/</button>
                <button class="choice-button" data-sound="d">/d/</button>
                <button class="choice-button" data-sound="id">/id/</button>
            </div>
            
            <div class="progress-info">
                <div>é€£çºŒæ­£ç¢º: <span id="correctStreak">0</span>/5</div>
                <div>åˆ†æ•¸: <span id="multipleChoiceScore">0</span></div>
            </div>
        </div>

        <!-- Boss Fight -->
        <div id="bossFight" class="game-container">
            <h2>Bossæˆ°</h2>
            <div class="instructions">æ“Šæ•—ç™¼éŸ³ä¹‹ç‹ï¼</div>
            
            <!-- Boss Fight Cutscene -->
            <div class="cutscene-container" id="bossCutscene">
                <div class="cutscene-content boss-arena">
                    <img src="assets/images/boss-arena.jpg" alt="Bossæˆ°å ´" class="background-img">
                    <div class="boss-character" id="bossCharacter">
                        <img src="assets/images/pronunciation-king.png" alt="ç™¼éŸ³ä¹‹ç‹">
                    </div>
                    <div class="player-character" id="finalPlayer">
                        <img src="assets/images/hero-final.png" alt="è‹±é›„">
                    </div>
                    <div class="battle-effects" id="battleEffects">
                        <!-- Battle effects and animations -->
                    </div>
                    <div class="cutscene-text">
                        <p>æœ€çµ‚æ±ºæˆ°ï¼é¢å°å¼·å¤§çš„ç™¼éŸ³ä¹‹ç‹ï¼Œé‹ç”¨ä½ å­¸åˆ°çš„æ‰€æœ‰çŸ¥è­˜å§ï¼</p>
                    </div>
                </div>
            </div>
            
            <canvas id="bossCanvas" width="800" height="600"></canvas>
            <div class="boss-info">
                <div>Bossè¡€é‡: <span id="bossHealth">100</span></div>
                <div>ç©å®¶è¡€é‡: <span id="playerHealth">100</span></div>
                <div>åˆ†æ•¸: <span id="bossScore">0</span></div>
            </div>
            
            <div class="choices">
                <button class="choice-button" data-sound="t">/t/</button>
                <button class="choice-button" data-sound="d">/d/</button>
                <button class="choice-button" data-sound="id">/id/</button>
            </div>
        </div>

        <!-- Ending Video Container -->
        <div id="endingContainer" class="ending-container" style="display: none;">
            <div class="video-wrapper">
                <video id="endingVideo" autoplay>
                    <source src="assets/video/ending.mp4" type="video/mp4">
                    æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒ video æ¨™ç±¤ã€‚
                </video>
                <div class="ending-controls">
                    <button id="playAgain">å†ç©ä¸€æ¬¡</button>
                    <button id="backToMenu">è¿”å›ä¸»é¸å–®</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio elements for sound effects -->
    <audio id="bgmAudio" loop>
        <source src="assets/audio/bgm.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="correctSound">
        <source src="assets/audio/correct.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="wrongSound">
        <source src="assets/audio/wrong.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="clickSound">
        <source src="assets/audio/click.mp3" type="audio/mpeg">
    </audio>

    <!-- Loading Scripts -->
    <script src="data/wordDatabase.js"></script>
    <script src="js/soundSystem.js"></script>
    <script src="js/gameSystem.js"></script>
    <script src="js/wordSearch.js"></script>
    <script src="js/fallingWords.js"></script>
    <script src="js/multipleChoice.js"></script>
    <script src="js/bossFight.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
